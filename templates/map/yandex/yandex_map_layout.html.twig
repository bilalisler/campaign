<!DOCTYPE html>
<html>
<head>
    <title>Examples. Placemark</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--
        Set your own API-key. Testing key is not valid for other web-sites and services.
        Get your API-key on the Developer Dashboard: https://developer.tech.yandex.ru/keys/
    -->
    <link rel="stylesheet" type="text/css" href="https://yastatic.net/bootstrap/3.3.4/css/bootstrap.min.css">

    <script src="{{ asset('assets/js/jquery.min.js') }}" type="text/javascript"></script>
    <script src="https://api-maps.yandex.com/2.1/?lang=en_RU&apikey=ee3fc44c-36e2-4b75-846b-383b64801751&mode=debug" type="text/javascript"></script>
    <script type="text/javascript">
        ymaps.ready(init);

        function init() {
            var myMap = new ymaps.Map("map", {
                    center: [55.1, 37.1],
                    zoom: 9
                }, {
                    searchControlProvider: 'yandex#search'
                });


            var cords = [
                [55.1, 37.1],
                [55.2, 37.2],
                [55.3, 37.3],
                [55.4, 37.4],
                [55.5, 37.5]
            ];

            for (var i = 0;i < cords.length;i++){
                var placemark = new ymaps.Placemark(cords[i], {
                    iconContent: "Get the address",
                    hintContent: "Drag the placemark and click to see the address"
                }, {
                    openEmptyBalloon: true,
                    iconLayout: 'default#image',
                    iconImageHref: 'https://dev.campaign.net/assets/images/shop.png',
                    iconImageSize: [40, 40],
                    iconImageOffset: [-5, -38]
                });

                placemark.events.add('balloonopen', function (event) {
                    var $targetPlaceMarkObj = event.originalEvent.currentTarget;
                    $targetPlaceMarkObj.properties.set('balloonContent', "Loading data...");

                    $.get('https://dev.campaign.net/map/rendered-data',function (response) {
                        $targetPlaceMarkObj.properties.set('balloonContent', response);
                    });
                });

                myMap.geoObjects.add(placemark);
            }
        }

    </script>
    <style>
        html, body, #map {
            width: 100%; height: 100%; padding: 0; margin: 0;
        }
    </style>
</head>
<body>
<div id="map"></div>


</body>
</html>
